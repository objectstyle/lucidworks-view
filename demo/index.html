<!doctype html>
<html>
<head>
</head>
<body>
    <div>
		<p>Inputs params </p>
		<p>Label External Search <input name="search" id='searchText' type="text" /><button onclick='sendMessage()'>GO!</button></p>
		<p>
			Categories: <button>Cat 1</button><button>Cat 2</button><button>Cat 3</button>
		</p>
		<p>
			<p>Event Log</p>
			<textarea cols="80" rows="10" id='eventLog'></textarea>
		</p>
	</div>
	
	<div>
		<iframe src="http://127.0.0.1:3000" name="iframe" height="600" width="800"></iframe>
	</div>
</body>
<script>
	window.addEventListener("message", receiveMessage, false);  

	function receiveMessage(event){ 
		console.log(event.source);
		//var source = event.source.frameElement; //this is the iframe that sent the message
		var message = event.data; //this is the message
		var newline = String.fromCharCode(13, 10);
		document.getElementById('eventLog').value += newline + message;
	}
	
	function sendMessage() {
		var message = document.getElementById('searchText').value;
        window.iframe.postMessage(message, 'http://127.0.0.1:3000'); //the '*' has to do with cross-domain messaging. leave it like it is for same-domain messaging.
    }
</script>
</html>